Improve the C4 documentation prompt set based on the comparison between plugin-generated output (root `C4-Documentation/`) and exploration-generated output (`docs/C4-Documentation/`).

## Context

Two C4 documentation sets exist for this project:
- **Root set** (`C4-Documentation/`): Generated by the original wshobson/agents C4 plugin via Claude Code
- **Docs set** (`docs/C4-Documentation/`): Generated by our exploration-based prompt scripts in `docs/auto-dev/PROMPTS/c4_documentation_prompt/`

A detailed comparison exists at `comms/outbox/exploration/c4-output-comparison/`. Read ALL four documents there:
- `README.md` — verdict and scorecard
- `accuracy-comparison.md` — line-by-line accuracy checks
- `structure-comparison.md` — architectural modeling differences
- `recommendations.md` — what to keep from each set and what neither achieved

**Our goal:** The docs set won overall on C4 compliance and infrastructure, but the root set (plugin output) beat us on component modeling, persona depth, and user journeys. We need to incorporate the root set's strengths into our prompts so future generations produce the best of both.

## Specific Improvements to Implement

Based on the comparison findings, make these changes to the prompt scripts in `docs/auto-dev/PROMPTS/c4_documentation_prompt/`:

### 1. Fix component boundary guidance (Task 003)

File: `task_prompts/003-component-synthesis.md`

The prompt's component boundary rules led to merging errors and validation into one component (wrong — they're separate directories with separate concerns) and promoting the barrel export to a full component (unnecessary inflation).

**Changes needed:**
- Add explicit guidance: "Do NOT merge directories that have separate concerns just to meet a size target. If `src/errors/` and `src/validation/` are separate directories with distinct purposes, they should be separate components even if each has only 2-3 code elements."
- Add guidance: "Barrel export files (e.g., `src/index.ts` that just re-exports from other modules) should be documented at the code level but do NOT warrant their own component. Assign barrel exports to whichever component they most closely serve, or to a 'Shell' component only if there is genuine orchestration logic beyond re-exports."
- Review the existing "Target 2-8 code-level elements" guideline and add: "Never merge unrelated directories just to reach the minimum. A 2-element component with clear purpose is better than a 5-element component with mixed concerns."

### 2. Strengthen container identification rules (Task 004)

File: `task_prompts/004-container-synthesis.md`

The plugin output incorrectly identified Jest (test runner) as a container. Our prompt got this right, but we should make the rule explicit to prevent regression.

**Changes needed:**
- Add to the container identification section: "Development tools and test runners (Jest, pytest, cargo test, etc.) are NOT containers. They run inside development environments and CI pipelines, not as independently deployable units. Only include them if they are separately deployed services (e.g., a dedicated test environment with its own infrastructure)."

### 3. Add upward navigation links requirement (Task 002)

File: `task_prompts/002-code-level-analysis.md`

Neither set links code-level docs back to their parent component. This makes navigation harder.

**Changes needed:**
- In the code-level document template, add a field after "Purpose": `- **Parent Component**: [To be assigned in Task 003]`
- Add a guideline: "Include a Parent Component field set to 'TBD' — Task 003 will update these references during component synthesis."

Also in Task 003 (`task_prompts/003-component-synthesis.md`):
- Add a step: "After identifying component boundaries, update each `c4-code-*.md` file's 'Parent Component' field with a link to the component doc it belongs to (e.g., `[Error Framework](./c4-component-error-framework.md)`)."

### 4. Enrich persona and user journey guidance (Task 005)

File: `task_prompts/005-context-synthesis.md`

The plugin output had 4 granular personas and 5 user journeys vs our 3 personas and 4 journeys. Our prompt should push for more depth.

**Changes needed:**
- Add guidance: "Identify at LEAST 3 personas. Consider these categories: end users (human consumers of the system), programmatic users (other systems, CLI tools, agents that interact with the system), maintainers (developers, CI systems, automation tools that modify the system). If an automation tool like auto-dev-mcp or CI is a significant actor, give it its own persona."
- Add guidance for user journeys: "Create at LEAST one user journey per persona. For library projects, include a 'Library Integration' journey showing how a consumer adds and uses the dependency. For projects with automation, include an 'Automated Development' journey showing the CI/auto-dev workflow."

### 5. Add comprehensive dependency graph requirement (Task 003)

File: `task_prompts/003-component-synthesis.md`

Neither set produced a full cross-module dependency graph.

**Changes needed:**
- Add to the master index template (c4-component.md): A section called "## Full Dependency Graph" with a Mermaid diagram showing ALL import relationships between components, not just the primary dependencies. This should be a single comprehensive diagram covering every component-to-component relationship.

### 6. Require verified test counts (Task 002)

File: `task_prompts/002-code-level-analysis.md`

Both sets estimated test counts by reading files rather than running tests, leading to count discrepancies.

**Changes needed:**
- In the test directory guidelines, add: "When documenting test directories, attempt to get verified test counts by running the project's test command (e.g., `npm test`, `pytest --co -q`, `cargo test -- --list`). If the test command succeeds, use the actual count. If it fails or is unavailable, estimate from the source and note 'estimated from source — not verified by execution'."

### 7. Document build output (Task 004)

File: `task_prompts/004-container-synthesis.md`

Neither set documented what the build produces.

**Changes needed:**
- Add to the container documentation template: A "Build Output" section that documents what the build process produces (e.g., `dist/` contents, compiled artifacts, their module format, declaration files for libraries). Include the build command and key output files.

## Verification

After making all changes:
1. Read through each modified file completely to verify no broken markdown
2. Check that new guidance doesn't contradict existing guidance
3. Verify the changes are internally consistent across task prompts (e.g., Task 002 adds a field that Task 003 references)

## Output Requirements

Create results in comms/outbox/exploration/c4-prompt-v2-fixes/:

### README.md (required)
First paragraph: Summary of all improvements applied.

Then for each improvement:
- File modified
- What was changed
- How it addresses the comparison finding

### changes-detail.md
Full details of every edit made, organized by file, with before/after context.

## When Complete
git add docs/auto-dev/PROMPTS/c4_documentation_prompt/
git add comms/outbox/exploration/c4-prompt-v2-fixes/
git commit -m "docs(c4): improve prompts based on plugin vs exploration comparison"
